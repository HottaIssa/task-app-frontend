<div class="flex flex-col gap-3 min-w-64">
  <div class="flex flex-col">
    <span
      class="text-xs font-semibold text-slate-400 uppercase tracking-wide flex items-center gap-2"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="size-4"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"
        />
      </svg>
      Description</span
    >
    @if (projectContext.isProjectOwner()) {
      <textarea
        title="Description"
        class="w-full text-sm text-slate-600 leading-relaxed border border-transparent hover:border-slate-200 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 rounded-md p-2 transition-all min-h-[120px] resize-none"
        (blur)="updateProject(project().id, { description: description() })"
        (keyup.enter)="updateProject(project().id, { description: description() })"
        placeholder="Add a more detailed description..."
        [(ngModel)]="description"
        maxlength="500"
      ></textarea>
    } @else {
      <p>
        {{ project().description }}
      </p>
    }
  </div>
  <div class="flex gap-4 flex-col md:flex-row">
    <div class="flex flex-col rounded-sm bg-white border border-gray-200 shadow-sm p-3">
      <span> Created By </span>
      <div class="flex items-center gap-2">
        <img src="{{ project().createdBy.avatar_url }}" alt="" class="rounded-full size-8" />
        <div class="flex flex-col">
          <span>{{ project().createdBy.username }}</span>
          <span class="text-sm text-gray-600 font-light">{{ project().createdBy.email }}</span>
        </div>
      </div>
    </div>
    <div
      class="flex flex-col text-sm rounded-sm bg-white border border-gray-200 shadow-sm p-3 w-full"
    >
      <span>Project Duration</span>
      <div class="flex w-full gap-2 flex-col md:flex-row">
        <div class="flex flex-col w-full">
          <span class="text-gray-600 font-light text-xs">Start Date:</span>
          <div class="flex text-xs">
            @if (projectContext.isProjectOwner()) {
              <input
                title="Start date"
                [(ngModel)]="startDate"
                type="date"
                (change)="updateProject(project().id, { startDate: startDate() })"
              />
            } @else {
              {{ project().startDate | date: 'dd/MM/yyyy' }}
            }
          </div>
        </div>

        <div class="flex flex-col w-full">
          <span class="text-gray-600 font-light text-xs">End Date:</span>
          <div class="flex text-xs">
            @if (projectContext.isProjectOwner()) {
              <input
                title="End date"
                [(ngModel)]="endDate"
                type="date"
                [disabled]="!startDate()"
                [min]="startDate()"
                class="disabled:opacity-50 disabled:cursor-not-allowed"
                (change)="updateProject(project().id, { endDate: endDate() })"
              />
            } @else {
              {{ project().endDate | date: 'dd/MM/yyyy' }}
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
