<a
  [routerLink]="[{ outlets: { modal: ['t', task().id] } }]"
  class="
    group relative flex flex-col w-full bg-white p-3 rounded-lg
    border border-slate-200 border-l-4 shadow-sm
    hover:shadow-md transition-all cursor-pointer
  "
  [class.border-l-red-500]="task().priority === 'High'"
  [class.border-l-amber-400]="task().priority === 'Medium'"
  [class.border-l-emerald-400]="task().priority === 'Low'"
>
<div class="flex w-full justify-between">
  <h4 class="text-sm font-semibold text-slate-800 leading-snug mb-3 line-clamp-2 group-hover:text-emerald-700 transition-colors">
    {{ task().title }}
  </h4>
  <div class="flex justify-between items-start mb-2">
    <span
      class="text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full border"
      [class.bg-red-50]="task().priority === 'High'"
      [class.text-red-600]="task().priority === 'High'"
      [class.border-red-100]="task().priority === 'High'"

      [class.bg-amber-50]="task().priority === 'Medium'"
      [class.text-amber-600]="task().priority === 'Medium'"
      [class.border-amber-100]="task().priority === 'Medium'"

      [class.bg-emerald-50]="task().priority === 'Low'"
      [class.text-emerald-600]="task().priority === 'Low'"
      [class.border-emerald-100]="task().priority === 'Low'"
    >
      {{ task().priority }}
    </span>
  </div>
</div>

  <div class="flex items-center justify-between mt-auto pt-2 border-t border-slate-50">

    <div class="flex items-center gap-2" title="Assigned to: {{ task().assignedTo?.username }}">
      @if (task().assignedTo?.avatar_url) {
        <img
          [src]="task().assignedTo?.avatar_url"
          class="w-6 h-6 rounded-full object-cover ring-1 ring-slate-100"
          alt="Avatar"
        >
      } @else {
        <div class="w-6 h-6 rounded-full bg-slate-100 text-slate-500 text-xs font-bold flex items-center justify-center ring-1 ring-slate-200">
          {{ task().assignedTo?.username?.charAt(0)?.toUpperCase() || '?' }}
        </div>
      }
      </div>

    <div
      class="flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium transition-colors"
      [class.bg-red-50]="task().isOverdue"
      [class.text-red-600]="task().isOverdue"
      [class.text-slate-400]="!task().isOverdue"
    >
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-3.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
      </svg>
      <span>{{ task().dueDate | date: 'MMM d' }}</span>
    </div>

  </div>
</a>
